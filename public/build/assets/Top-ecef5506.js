import{k as r,o as c,f as i,i as m,l as z,b as e,F as h,j as q,m as k,a as _,u as C,w as g,p,q as f,s as Q,t as D}from"./app-865d1ee5.js";import{_ as N}from"./AuthenticatedLayout-1a72b56a.js";import{Z as S}from"./index.esm-bde64fbc.js";import $ from"./Quiz-30391185.js";import"./auto-5842a5d9.js";/* empty css                                              *//* empty css                                                               */import"./ApplicationLogo-34c4e552.js";import"./_plugin-vue_export-helper-c27b6911.js";const j={class:"fixed inset-0 flex items-center justify-center z-50","aria-hidden":"true"},L=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})],-1),M=[L],V=q('<header class="modal__header flex justify-between items-center px-4 py-2 bg-gray-100 rounded-t-lg mt-4"><h2 class="modal__title text-lg font-semibold text-gray-800"><span class="font-bold text-blue-700">クイズサイトへようこそ！</span><br></h2></header><main class="modal__content p-4 text-gray-700"><p class="mb-4"><span class="font-bold text-blue-700">カテゴリーを選択</span><br> 最初に、クイズのカテゴリーを選択してください。カテゴリーは異なるトピックやテーマに関連しており、あなたの興味に合ったものを選ぶことができます。 </p><p class="mb-4"><span class="font-bold text-blue-700">出題数を選択</span><br> 次に、出題される問題の数を選んでください。5問から20問まで選べます。 </p><p><span class="font-bold text-blue-700">クイズ開始！</span><br> カテゴリーと問題数を選択したら、&quot;クイズ開始&quot; ボタンをクリックしてください。クイズが始まり、最初の問題が表示されます。 </p></main>',2),A={__name:"TopModal",setup(b){const l=r(!1),a=()=>{l.value=!l.value},d=u=>{u.target.classList.contains("modal__overlay")&&a()};return(u,n)=>(c(),i(h,null,[m(e("div",j,[e("div",{class:"modal fixed inset-0 flex items-center justify-center z-50"},[e("div",{onClick:d,class:"modal__overlay fixed inset-0 bg-opacity-50 bg-black"}),e("div",{class:"modal__container bg-white rounded-lg shadow-lg max-w-md mx-auto p-4 z-50 relative",role:"dialog","aria-modal":"true","aria-labelledby":"modal-1-title"},[e("button",{onClick:a,type:"button",class:"modal__close absolute top-4 right-4 focus:outline-none text-gray-500 hover:text-gray-700"},M),V,e("footer",{class:"modal__footer px-4 py-2"},[e("button",{onClick:a,type:"button",class:"modal__btn modal__btn-primary bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded focus:outline-none mr-2"}," 閉じる ")])])])],512),[[z,l.value]]),e("button",{onClick:a,type:"button",class:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded focus:outline-none"},"ヘルプ")],64))}},B=e("h2",{class:"font-semibold text-2xl text-gray-800 leading-tight"},"トップ",-1),F={class:"absolute top-40 right-4 z-50"},R={class:"flex flex-col items-center justify-start h-screen p-32"},I={key:0,class:"max-w-md mb-6 text-center"},O=e("h2",{class:"text-xl font-semibold mb-2 mx-auto"},"クイズカテゴリーを選択してください",-1),T=["value"],U=e("h2",{class:"text-lg font-semibold mt-4"},"出題数を選択してください",-1),E=e("option",{value:"5"},"5問",-1),W=e("option",{value:"10"},"10問",-1),Z=e("option",{value:"15"},"15問",-1),G=e("option",{value:"20"},"20問",-1),H=[E,W,Z,G],J={key:1,class:"w-full max-w-4xl"},le={__name:"Top",setup(b){const l=r(null),a=r(5),d=r([]),u=r(!1),n=r({id:null,title:"",image_src:"",user_id:null,category_id:null,correct_answer:"",wrong_answer_1:"",wrong_answer_2:"",wrong_answer_3:"",explain:""});async function w(){try{const s=await p.get("/api/categories");console.log("Response:",s.data),d.value=s.data}catch(s){console.error("カテゴリーの取得に失敗しました",s)}}k(()=>{w()});async function v(s){try{const t=await p.get("/api/quizzes",{params:{category_id:s,num_questions:a.value}});return console.log("response.dataの値:",t.data),t.data}catch(t){return console.error("クイズの取得に失敗しました",t),[]}}async function x(s){try{console.log("fetchChoicesAndCorrectAnswer - quizId:",s);const t=await p.get(`/api/quizzes/${s}`);console.log("quizResponse:",t.data);const o=t.data;return console.log("quizData:",o),console.log("answer1:",o.correct_answer),console.log("answer2:",o.quiz.choices.correct_answer),console.log("answer3:",o.quiz.choices.wrong_answer_3),{choices:[o.quiz.choices.correct_answer,o.quiz.choices.wrong_answer_1,o.quiz.choices.wrong_answer_2,o.quiz.choices.wrong_answer_3]}}catch(t){return console.error("Fetch failed with error:",t),{choices:[]}}}async function y(){try{const s=l.value;console.log("選択したカテゴリーID:",l.value),console.log("選択した出題数:",a.value);const t=await v(s);if(console.log("quizzes:",t),t.length>0){n.value=t[0],console.log("currentQuiz.value:",n.value);const o=await x(n.value.id);n.value.choices=o.choices,console.log("result.choices:",o.choices),console.log("currentQuiz.value.choices:",n.value.choices),u.value=!0}else console.error("取得したクイズデータがありません")}catch(s){console.error("クイズ開始時にエラーが発生しました",s)}}return(s,t)=>(c(),i(h,null,[_(C(S),{title:"トップ"}),_(N,null,{header:g(()=>[B]),default:g(()=>[e("div",F,[_(A)]),e("div",R,[u.value?(c(),i("div",J,[_($,{quizData:n.value,selectedNumQuestions:Number(a.value),selectedCategory:l.value},null,8,["quizData","selectedNumQuestions","selectedCategory"])])):(c(),i("div",I,[O,m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.value=o),class:"py-2 px-4 border rounded-md w-full"},[(c(!0),i(h,null,Q(d.value,o=>(c(),i("option",{value:o.id,key:o.id},D(o.name),9,T))),128))],512),[[f,l.value]]),U,m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>a.value=o),class:"py-2 px-4 border rounded-md w-full"},H,512),[[f,a.value]]),e("button",{onClick:y,class:"mt-6 px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-full hover:opacity-90 focus:outline-none shadow-lg w-full"}," クイズ開始！ ")]))])]),_:1})],64))}};export{le as default};
